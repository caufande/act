# Devar

本插件用于修复 Taro 在开发环境下编译时不对诸如 `Node` 、 `Location` 等变量进行重命名导致的运行时变量定义冲突。

本插件的名字是 Dev 和 Var 两个缩写结合起来的缩写。

## 变量定义冲突

由于 Taro 在开发环境下编译不会进行代码压缩，所以各种库里的变量都是原来的名字。

如果有一个库是编译原理相关的，它可能会使用 `Node` 等浏览器环境中已经存在的变量来命名它自己的变量。
然而我也不知道为什么，在微信中这种命名是不被允许的，会导致定义冲突，阻塞所有代码。
这可能是因为微信中的浏览器环境变量是通过 `const` 之类的方法声明出来的。

这就导致在使用库的时候非常不方便，因为没法在开发环境中进行测试。

## 解决方法

所以我想到一个好方法，就是把打包好的文件头上加上 `(() => {` ，尾部加上 `})();` ，使整个文件变成一个立即运行的函数，就可以在这个函数内部的作用域随意重定义变量了。

## 使用

### 安装

```bash
npm i @cauact/taro-plugin-devar -D
```

### 使用插件

`/config/dev.js`

```js
const config = {
	plugins: [
		["@cauact/taro-plugin-devar"],
	],
};
```
