{"version":3,"file":"hooks.solid.js","sources":["../../../src/utils/hooks.solid.ts"],"sourcesContent":["import Solid from 'solid-js'\n\nimport type { TFunc } from '@tarojs/runtime/dist/runtime.esm'\n\nexport const useState = <T = any>(value: T, options?): [() => T, TFunc] => {\n  const [state, setState] = Solid.createSignal(value, options)\n  return [state, setState]\n}\n\nexport const useCallback = (callback, deps) => {\n  const [_, setSignal] = Solid.createSignal(0) // eslint-disable-line @typescript-eslint/no-unused-vars\n\n  Solid.createEffect(() => {\n    deps.forEach(dep => typeof dep === 'function' ? dep() : dep)\n    setSignal(s => s + 1)\n  })\n\n  return async (...args) => {\n    Solid.createEffect(() => {\n      const clean = callback(...args)\n      return typeof clean === 'function' && Solid.onCleanup(clean)\n    })\n  }\n}\n\nexport const useEffect = (effect, deps) => {\n  Solid.createEffect(() => {\n    const cleanup = effect()\n    deps.forEach(dep => dep)\n\n    return () => {\n      if (typeof cleanup === 'function') cleanup()\n    }\n  })\n}\n\nexport const useMemo = Solid.createMemo\n\nexport const useRef = <T = any>(init?: T) => {\n  const [state] = Solid.createSignal(init)\n  return {\n    current: state()\n  }\n}\n\nexport const createContext = Solid.createContext\nexport const useContext = Solid.useContext\nexport const memo = (component, _propsAreEqual) => component // eslint-disable-line @typescript-eslint/no-unused-vars\nexport const forwardRef = (component) => component\nexport const useImperativeHandle = (ref, createHandle, deps) => {\n  Solid.createEffect(() => {\n    deps.forEach(dep => dep)\n    ref.current = createHandle()\n  })\n}\n"],"names":["useState","value","options","state","setState","Solid","createSignal","useCallback","callback","deps","_","setSignal","createEffect","forEach","dep","s","_len","arguments","length","args","Array","_key","__awaiter","clean","onCleanup","useEffect","effect","cleanup","useMemo","createMemo","useRef","init","current","createContext","useContext","memo","component","_propsAreEqual","forwardRef","useImperativeHandle","ref","createHandle"],"mappings":"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"}