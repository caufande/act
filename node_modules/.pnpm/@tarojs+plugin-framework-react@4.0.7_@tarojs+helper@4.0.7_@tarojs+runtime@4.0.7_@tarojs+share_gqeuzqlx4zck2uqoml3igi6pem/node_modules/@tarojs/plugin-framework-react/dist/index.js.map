{"version":3,"file":"index.js","sources":["../src/api-loader.ts","../src/loader-meta.ts","../src/vite.h5.ts","../src/vite.harmony.ts","../src/vite.mini.ts","../src/webpack.h5.ts","../src/webpack.harmony.ts","../src/webpack.mini.ts","../src/index.ts"],"sourcesContent":["export default function (str: string) {\n  return `import {\n  useAddToFavorites,\n  useDidHide,\n  useDidShow,\n  useError,\n  useLaunch,\n  useLoad,\n  useOptionMenuClick,\n  usePageNotFound,\n  usePageScroll,\n  usePullDownRefresh,\n  usePullIntercept,\n  useReachBottom,\n  useReady,\n  useResize,\n  useRouter,\n  useSaveExitState,\n  useShareAppMessage,\n  useShareTimeline,\n  useTabItemTap,\n  useTitleClick,\n  useScope,\n  useUnhandledRejection,\n  useUnload\n} from '@tarojs/plugin-framework-react/dist/runtime'\n${str}\n\ntaro.useAddToFavorites = useAddToFavorites\ntaro.useDidHide = useDidHide\ntaro.useDidShow = useDidShow\ntaro.useError = useError\ntaro.useLaunch = useLaunch\ntaro.useLoad = useLoad\ntaro.useOptionMenuClick = useOptionMenuClick\ntaro.usePageNotFound = usePageNotFound\ntaro.usePageScroll = usePageScroll\ntaro.usePullDownRefresh = usePullDownRefresh\ntaro.usePullIntercept = usePullIntercept\ntaro.useReachBottom = useReachBottom\ntaro.useReady = useReady\ntaro.useResize = useResize\ntaro.useRouter = useRouter\ntaro.useSaveExitState = useSaveExitState\ntaro.useShareAppMessage = useShareAppMessage\ntaro.useShareTimeline = useShareTimeline\ntaro.useTabItemTap = useTabItemTap\ntaro.useTitleClick = useTitleClick\ntaro.useScope = useScope\ntaro.useUnhandledRejection = useUnhandledRejection\ntaro.useUnload = useUnload\n\nexport {\n  useAddToFavorites,\n  useDidHide,\n  useDidShow,\n  useError,\n  useLaunch,\n  useLoad,\n  useOptionMenuClick,\n  usePageNotFound,\n  usePageScroll,\n  usePullDownRefresh,\n  usePullIntercept,\n  useReachBottom,\n  useReady,\n  useResize,\n  useRouter,\n  useSaveExitState,\n  useShareAppMessage,\n  useShareTimeline,\n  useTabItemTap,\n  useTitleClick,\n  useScope,\n  useUnhandledRejection,\n  useUnload\n}\n`\n}\n","import * as acorn from 'acorn'\nimport * as walk from 'acorn-walk'\n\nimport { Frameworks } from './index'\n\nimport type { ILoaderMeta } from '@tarojs/taro/types/compile/config/plugin'\n\nfunction addConfig (source) {\n  const configsMap = {\n    enableShareAppMessage: ['onShareAppMessage', 'useShareAppMessage'],\n    enableShareTimeline: ['onShareTimeline', 'useShareTimeline']\n  }\n  const ast = acorn.parse(source, {\n    ecmaVersion: 'latest',\n    sourceType: 'module'\n  })\n\n  const additionConfig: Record<string, any> = {}\n\n  function check (name: string) {\n    Object.keys(configsMap).forEach(configName => {\n      const apis: string[] = configsMap[configName]\n      if (apis.includes(name)) {\n        additionConfig[configName] = true\n      }\n    })\n  }\n\n  walk.simple(ast, {\n    FunctionExpression (node: any) {\n      if (!node.id || !node.id.name) return\n      check(node.id.name)\n    },\n    FunctionDeclaration (node: any) {\n      if (!node.id || !node.id.name) return\n      check(node.id.name)\n    },\n    CallExpression (node: any) {\n      const { callee } = node\n      if (callee.type === 'Identifier') {\n        check(callee.name)\n      } else if (callee.type === 'MemberExpression') {\n        if (callee.property.type === 'Identifier') {\n          check(callee.property.name)\n        } else if (callee.property.type === 'Literal') {\n          check(callee.property.value)\n        }\n      }\n      node.arguments.forEach(item => {\n        if (item.type === 'Literal' && item.value) {\n          check(item.value)\n        }\n      })\n    }\n  })\n\n  return additionConfig\n}\n\nexport function getLoaderMeta (framework: Frameworks): ILoaderMeta {\n  const loaderMeta = {\n    importFrameworkStatement: `\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n`,\n    mockAppStatement: `\nclass App extends React.Component {\n  render () {\n    return this.props.children\n  }\n}\n`,\n    frameworkArgs: 'React, ReactDOM, config',\n    creator: 'createReactApp',\n    creatorLocation: '@tarojs/plugin-framework-react/dist/runtime',\n    importFrameworkName: 'React',\n    extraImportForWeb: '',\n    execBeforeCreateWebApp: '',\n    modifyConfig (config, source) {\n      Object.assign(config, addConfig(source))\n    }\n  }\n\n  if (process.env.TARO_PLATFORM === 'web') {\n    if (framework === 'react') {\n      const react = require('react')\n      const majorVersion = Number((react.version || '18').split('.')[0])\n      if (majorVersion >= 18) {\n        // Note: In react 18 or above, should using react-dom/client\n        loaderMeta.importFrameworkStatement = loaderMeta.importFrameworkStatement.replace('\\'react-dom\\'', '\\'react-dom/client\\'')\n        loaderMeta.extraImportForWeb += `import { findDOMNode, render, unstable_batchedUpdates } from 'react-dom'\\n`\n        loaderMeta.execBeforeCreateWebApp += `Object.assign(ReactDOM, { findDOMNode, render, unstable_batchedUpdates })\\n`\n      }\n    }\n  }\n  return loaderMeta\n}\n","import { fs, REG_TARO_H5_RUNTIME_API } from '@tarojs/helper'\nimport { mergeWith } from 'lodash'\n\nimport apiLoader from './api-loader'\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type { PluginOption } from 'vite'\nimport type { Frameworks } from './index'\n\nexport function h5iVitePlugin (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  return [\n    injectLoaderMeta(ctx, framework),\n    setTaroApi(),\n    esbuildExclude(framework)\n  ]\n}\n\nfunction injectLoaderMeta (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  function customizer (object = '', sources = '') {\n    if ([object, sources].every(e => typeof e === 'string')) return object + sources\n  }\n  const { runnerUtils } = ctx\n  const { getViteH5CompilerContext } = runnerUtils\n  return {\n    name: 'taro-react:loader-meta',\n    async buildStart () {\n      const viteCompilerContext = await getViteH5CompilerContext(this)\n      if (viteCompilerContext) {\n        viteCompilerContext.loaderMeta = mergeWith(\n          getLoaderMeta(framework), viteCompilerContext.loaderMeta, customizer\n        )\n      }\n    }\n  }\n}\n\nfunction setTaroApi (): PluginOption {\n  // dev 环境通过 esbuild 来做； pro 环境通过 rollup load 钩子来做；因为生产环境不会走 esbuild\n  return {\n    name: 'taro-react:process-import-taro',\n    enforce: 'pre',\n    config: () => ({\n      optimizeDeps: {\n        esbuildOptions: {\n          plugins: [\n            {\n              name: 'taro:react-api',\n              setup (build) {\n                build.onLoad({ filter: REG_TARO_H5_RUNTIME_API }, async (args) => {\n                  const input = await fs.readFile(args.path, 'utf8')\n                  return {\n                    contents: apiLoader(input + '\\n' + 'const taro = Taro__default\\n')\n                  }\n                })\n              },\n            }\n          ]\n        }\n      },\n    }),\n    async load (id) {\n      if (process.env.NODE_ENV === 'production' && REG_TARO_H5_RUNTIME_API.test(id)) {\n        try {\n          const input = await fs.readFile(id, 'utf8')\n          return apiLoader(input + '\\n' + 'const taro = Taro__default\\n')\n        } catch (_) {\n          return null\n        }\n      }\n    }\n  }\n}\n\n// todo 后面看看能否把 preact 改为虚拟模块\nfunction esbuildExclude (framework: Frameworks): PluginOption {\n  if (framework !== 'preact') return null\n  return {\n    name: 'taro-react:esvuild-exclude',\n    enforce: 'pre',\n    config: () => ({\n      optimizeDeps: {\n        exclude: ['react', 'preact']\n      }\n    })\n  }\n}\n","import { defaultMainFields, fs, resolveSync } from '@tarojs/helper'\n\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type { PluginOption } from 'vite'\nimport type { Frameworks } from './index'\n\nexport function harmonyVitePlugin (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  return [\n    injectLoaderMeta(ctx, framework),\n    aliasPlugin(ctx, framework),\n  ]\n}\n\nfunction injectLoaderMeta (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  return {\n    name: 'taro-react:loader-meta',\n    buildStart () {\n      const { runnerUtils } = ctx\n      const { getViteHarmonyCompilerContext } = runnerUtils\n      const viteCompilerContext = getViteHarmonyCompilerContext(this)\n      if (viteCompilerContext) {\n        viteCompilerContext.loaderMeta ||= {}\n        Object.assign(viteCompilerContext.loaderMeta, getLoaderMeta(framework))\n      }\n    }\n  }\n}\n\nfunction aliasPlugin (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  if (framework === 'react') {\n    return {\n      name: 'taro-react:alias',\n      config (config) {\n        const alias: ({ find: string | RegExp, replacement: string })[] = [\n          { find: /react-dom$/, replacement: '@tarojs/react' },\n          { find: /react-dom\\/client$/, replacement: '@tarojs/react' },\n        ]\n\n        const mainFields = ['unpkg', ...defaultMainFields]\n        const resolveOptions = {\n          basedir: process.cwd(),\n          mainFields,\n        }\n        const isProd = config.mode === 'production'\n        // TODO：harmony 目前会导致部分包用 production 版本，部分用 development 版本，导致许多 api 报错\n        const isHarmony = ctx.runOpts.options.platform === 'harmony'\n        if (!isProd && ctx.initialConfig.harmony?.debugReact !== true && !isHarmony) {\n          // 在React18中，使用了exports字段约定了模块暴露路径，其中并未暴露 ./cjs/ 。这将使上面的alias在编译时报错。相当的tricky。\n          // Why writeJson？ prebundle will load package.json via readFile to check exports property.\n          const reactPkgPath = resolveSync('react/package.json', resolveOptions)\n          if (reactPkgPath) {\n            const reactPkg = require('react/package.json')\n            const reactVersion = (reactPkg.version || '')\n            if ((/^[~^]?18/).test(reactVersion) && reactPkg.exports) {\n              reactPkg.exports = Object.assign(reactPkg.exports, {\n                './cjs/': './cjs/'\n              })\n              fs.writeJsonSync(reactPkgPath, reactPkg, { spaces: 2 })\n            }\n          }\n        }\n\n        return {\n          resolve: {\n            alias\n          }\n        }\n      }\n    }\n  }\n  return []\n}\n","import { defaultMainFields, fs, resolveSync } from '@tarojs/helper'\n\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type { PluginOption } from 'vite'\nimport type { Frameworks } from './index'\n\nexport function miniVitePlugin (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  return [\n    injectLoaderMeta(ctx, framework),\n    aliasPlugin(ctx, framework),\n  ]\n}\n\nfunction injectLoaderMeta (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  return {\n    name: 'taro-react:loader-meta',\n    buildStart () {\n      const { runnerUtils } = ctx\n      const { getViteMiniCompilerContext } = runnerUtils\n      const viteCompilerContext = getViteMiniCompilerContext(this)\n      if (viteCompilerContext) {\n        viteCompilerContext.loaderMeta ||= {}\n        Object.assign(viteCompilerContext.loaderMeta, getLoaderMeta(framework))\n      }\n    }\n  }\n}\n\nfunction aliasPlugin (ctx: IPluginContext, framework: Frameworks): PluginOption {\n  if (framework === 'react') {\n    return {\n      name: 'taro-react:alias',\n      config (config) {\n        const alias: ({ find: string | RegExp, replacement: string })[] = [\n          { find: /react-dom$/, replacement: '@tarojs/react' },\n          { find: /react-dom\\/client$/, replacement: '@tarojs/react' },\n        ]\n\n        const mainFields = ['unpkg', ...defaultMainFields]\n        const resolveOptions = {\n          basedir: process.cwd(),\n          mainFields,\n        }\n        const isProd = config.mode === 'production'\n        // TODO：harmony 目前会导致部分包用 production 版本，部分用 development 版本，导致许多 api 报错\n        const isHarmony = ctx.runOpts.options.platform === 'harmony'\n        if (!isProd && ctx.initialConfig.mini?.debugReact !== true && !isHarmony) {\n          // 不是生产环境，且没有设置 debugReact，则使用压缩版本的 react 依赖，减少体积\n          alias.push({ find: /react-reconciler$/, replacement: 'react-reconciler/cjs/react-reconciler.production.min.js' })\n          alias.push({ find: /^(?!.*mobx-react$).*react$/, replacement: 'react/cjs/react.production.min.js' })\n          alias.push({ find: /scheduler$/, replacement: 'scheduler/cjs/scheduler.production.min.js' })\n          alias.push({ find: /react\\/jsx-runtime$/, replacement: 'react/cjs/react-jsx-runtime.production.min.js' })\n\n          // 在React18中，使用了exports字段约定了模块暴露路径，其中并未暴露 ./cjs/ 。这将使上面的alias在编译时报错。相当的tricky。\n          // Why writeJson？ prebundle will load package.json via readFile to check exports property.\n          const reactPkgPath = resolveSync('react/package.json', resolveOptions)\n          if (reactPkgPath) {\n            const reactPkg = require('react/package.json')\n            const reactVersion = (reactPkg.version || '')\n            if ((/^[~^]?18/).test(reactVersion) && reactPkg.exports) {\n              reactPkg.exports = Object.assign(reactPkg.exports, {\n                './cjs/': './cjs/'\n              })\n              fs.writeJsonSync(reactPkgPath, reactPkg, { spaces: 2 })\n            }\n          }\n        }\n\n        return {\n          resolve: {\n            alias\n          }\n        }\n      }\n    }\n  }\n  return []\n}\n","import { defaultMainFields, REG_TARO_H5, resolveSync } from '@tarojs/helper'\nimport { mergeWith } from 'lodash'\n\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type Chain from 'webpack-chain'\nimport type { Frameworks } from './index'\n\nexport function modifyH5WebpackChain (ctx: IPluginContext, framework: Frameworks, chain: Chain) {\n  setLoader(framework, chain)\n  setPlugin(ctx, framework, chain)\n\n  const { isBuildNativeComp = false } = ctx.runOpts?.options || {}\n  const externals: Record<string, { [externalType: string]: string } | string> = {}\n  if (isBuildNativeComp) {\n    // Note: 该模式不支持 prebundle 优化，不必再处理\n    externals.react = {\n      commonjs: 'react',\n      commonjs2: 'react',\n      amd: 'react',\n      root: 'React'\n    }\n    externals['react-dom'] = {\n      commonjs: 'react-dom',\n      commonjs2: 'react-dom',\n      amd: 'react-dom',\n      root: 'ReactDOM'\n    }\n    if (framework === 'preact') {\n      externals.preact = 'preact'\n    }\n\n    chain.merge({\n      externalsType: 'umd'\n    })\n  }\n\n  chain.merge({\n    externals,\n    module: {\n      rule: {\n        'process-import-taro-h5': {\n          test: REG_TARO_H5,\n          loader: require.resolve('./api-loader'),\n        },\n      },\n    },\n  })\n}\n\nfunction setLoader (framework: Frameworks, chain) {\n  function customizer (object = '', sources = '') {\n    if ([object, sources].every((e) => typeof e === 'string')) return object + sources\n  }\n  chain.plugin('mainPlugin').tap((args) => {\n    args[0].loaderMeta = mergeWith(getLoaderMeta(framework), args[0].loaderMeta, customizer)\n    return args\n  })\n}\n\nfunction setPlugin (ctx: IPluginContext, framework: Frameworks, chain) {\n  const config = ctx.initialConfig\n  const webpackConfig = chain.toConfig()\n  const isProd = webpackConfig.mode === 'production'\n  if (!isProd && config.h5?.devServer?.hot !== false) {\n    // 默认开启 fast-refresh\n    if (framework === 'react') {\n      chain.plugin('fastRefreshPlugin').use(require('@pmmmwh/react-refresh-webpack-plugin'))\n    } else if (framework === 'preact') {\n      chain.plugin('hotModuleReplacementPlugin').use(require('webpack').HotModuleReplacementPlugin)\n      chain.plugin('fastRefreshPlugin').use(require('@prefresh/webpack'))\n    }\n  }\n\n  const mainFields = ['unpkg', ...defaultMainFields]\n  const resolveOptions = {\n    basedir: process.cwd(),\n    mainFields,\n  }\n  if (framework === 'react') {\n    const alias = chain.resolve.alias\n    // Note: 本地 link 调试时，避免 react 重复打包\n    alias.set('react$', resolveSync('react', resolveOptions))\n    alias.set('react-dom$', resolveSync('react-dom', resolveOptions))\n  }\n}\n","import path from 'node:path'\n\nimport { defaultMainFields, fs, resolveSync } from '@tarojs/helper'\n\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type { Frameworks } from './index'\n\nexport function modifyHarmonyWebpackChain (ctx: IPluginContext, framework: Frameworks, chain) {\n  setAlias(ctx, framework, chain)\n  setLoader(framework, chain)\n}\n\nfunction setAlias (ctx: IPluginContext, framework: Frameworks, chain) {\n  const config = ctx.initialConfig\n  const alias = chain.resolve.alias\n\n  const mainFields = ['unpkg', ...defaultMainFields]\n  const resolveOptions = {\n    basedir: process.cwd(),\n    mainFields,\n  }\n  if (framework === 'react') {\n    alias.set('react-dom$', '@tarojs/react')\n    alias.set('react-dom/client$', '@tarojs/react')\n    const webpackConfig = chain.toConfig()\n    const isProd = webpackConfig.mode === 'production'\n    if (!isProd && config.harmony?.debugReact !== true) {\n      // 不是生产环境，且没有设置 debugReact，则使用压缩版本的 react 依赖，减少体积\n      // 兼容pnpm workspace\n      const reactModulePath = resolveSync('react', resolveOptions)!\n      const newFilePath = path.join(path.dirname(reactModulePath), 'cjs', 'react.production.min.js')\n\n      alias.set('react-reconciler$', 'react-reconciler/cjs/react-reconciler.production.min.js')\n      alias.set('react$', newFilePath)\n      alias.set('react/jsx-runtime$', 'react/cjs/react-jsx-runtime.production.min.js')\n\n      // 在React18中，使用了exports字段约定了模块暴露路径，其中并未暴露 ./cjs/ 。这将使上面的alias在编译时报错。相当的tricky。\n      // Why writeJson？ prebundle will load package.json via readFile to check exports property.\n      const reactPkgPath = resolveSync('react/package.json', resolveOptions)\n      if (reactPkgPath) {\n        const reactPkg = require('react/package.json')\n        const reactVersion = reactPkg.version || ''\n        if (/^[~^]?18/.test(reactVersion) && reactPkg.exports) {\n          reactPkg.exports = Object.assign(reactPkg.exports, {\n            './cjs/': './cjs/',\n          })\n          fs.writeJsonSync(reactPkgPath, reactPkg, { spaces: 2 })\n        }\n      }\n    }\n  }\n}\n\nfunction setLoader (framework: Frameworks, chain) {\n  chain.plugin('mainPlugin').tap((args) => {\n    args[0].loaderMeta ||= {}\n    Object.assign(args[0].loaderMeta, getLoaderMeta(framework))\n    return args\n  })\n}\n","import path from 'node:path'\n\nimport { defaultMainFields, fs, resolveSync } from '@tarojs/helper'\n\nimport { getLoaderMeta } from './loader-meta'\n\nimport type { IPluginContext } from '@tarojs/service'\nimport type { Frameworks } from './index'\n\nexport function modifyMiniWebpackChain (ctx: IPluginContext, framework: Frameworks, chain) {\n  setAlias(ctx, framework, chain)\n  setLoader(framework, chain)\n}\n\nfunction setAlias (ctx: IPluginContext, framework: Frameworks, chain) {\n  const config = ctx.initialConfig\n  const alias = chain.resolve.alias\n\n  const mainFields = ['unpkg', ...defaultMainFields]\n  const resolveOptions = {\n    basedir: process.cwd(),\n    mainFields,\n  }\n  if (framework === 'react') {\n    alias.set('react-dom$', '@tarojs/react')\n    alias.set('react-dom/client$', '@tarojs/react')\n    const webpackConfig = chain.toConfig()\n    const isProd = webpackConfig.mode === 'production'\n    if (!isProd && config.mini?.debugReact !== true) {\n      // 不是生产环境，且没有设置 debugReact，则使用压缩版本的 react 依赖，减少体积\n      // 兼容pnpm workspace\n      const reactModulePath = resolveSync('react', resolveOptions)!\n      const newFilePath = path.join(path.dirname(reactModulePath), 'cjs', 'react.production.min.js')\n\n      alias.set('react-reconciler$', 'react-reconciler/cjs/react-reconciler.production.min.js')\n      alias.set(/^(?!.*mobx-react$).*react$/, newFilePath)\n      alias.set('react/jsx-runtime$', 'react/cjs/react-jsx-runtime.production.min.js')\n\n      // 在React18中，使用了exports字段约定了模块暴露路径，其中并未暴露 ./cjs/ 。这将使上面的alias在编译时报错。相当的tricky。\n      // Why writeJson？ prebundle will load package.json via readFile to check exports property.\n      const reactPkgPath = resolveSync('react/package.json', resolveOptions)\n      if (reactPkgPath) {\n        const reactPkg = require('react/package.json')\n        const reactVersion = reactPkg.version || ''\n        if (/^[~^]?18/.test(reactVersion) && reactPkg.exports) {\n          reactPkg.exports = Object.assign(reactPkg.exports, {\n            './cjs/': './cjs/',\n          })\n          fs.writeJsonSync(reactPkgPath, reactPkg, { spaces: 2 })\n        }\n      }\n    }\n  }\n}\n\nfunction setLoader (framework: Frameworks, chain) {\n  chain.plugin('miniPlugin').tap((args) => {\n    args[0].loaderMeta ||= {}\n    Object.assign(args[0].loaderMeta, getLoaderMeta(framework))\n    return args\n  })\n}\n","import { fs, REG_TARO_H5 } from '@tarojs/helper'\nimport { isString } from '@tarojs/shared'\n\nimport { h5iVitePlugin } from './vite.h5'\nimport { harmonyVitePlugin } from './vite.harmony'\nimport { miniVitePlugin } from './vite.mini'\nimport { modifyH5WebpackChain } from './webpack.h5'\nimport { modifyHarmonyWebpackChain } from './webpack.harmony'\nimport { modifyMiniWebpackChain } from './webpack.mini'\n\nimport type { esbuild } from '@tarojs/helper'\nimport type { IPluginContext } from '@tarojs/service'\nimport type { IProjectConfig } from '@tarojs/taro/types/compile'\nimport type { PluginOption } from 'vite'\n\nexport type Frameworks = 'react' | 'preact'\n\nexport function isReactLike(framework: IProjectConfig['framework'] = 'react'): framework is Frameworks {\n  return ['react', 'preact'].includes(framework)\n}\n\nexport default (ctx: IPluginContext) => {\n  const { framework = 'react' } = ctx.initialConfig\n\n  if (!isReactLike(framework)) return\n\n  ctx.modifyWebpackChain(({ chain }) => {\n    // 通用\n    setAlias(framework, chain)\n\n    if (process.env.TARO_PLATFORM === 'web') {\n      // H5\n      modifyH5WebpackChain(ctx, framework, chain)\n    } else if (process.env.TARO_PLATFORM === 'harmony' || process.env.TARO_ENV === 'harmony') {\n      // 鸿蒙\n      modifyHarmonyWebpackChain(ctx, framework, chain)\n    } else {\n      // 小程序\n      modifyMiniWebpackChain(ctx, framework, chain)\n    }\n  })\n\n  ctx.modifyRunnerOpts(({ opts }) => {\n    if (!opts?.compiler) return\n\n    if (isString(opts.compiler)) {\n      opts.compiler = {\n        type: opts.compiler,\n      }\n    }\n\n    const { compiler } = opts\n    if (compiler.type === 'webpack5') {\n      // 提供给 webpack5 依赖预编译收集器的第三方依赖\n      const deps = ['react', 'react-dom', 'react/jsx-runtime', '@tarojs/plugin-framework-react/dist/runtime']\n      compiler.prebundle ||= {}\n      const prebundleOptions = compiler.prebundle\n      prebundleOptions.include ||= []\n      prebundleOptions.include = prebundleOptions.include.concat(deps)\n      prebundleOptions.exclude ||= []\n      prebundleOptions.exclude.push(/mobx/) // 依赖会对 webpack 修改，默认排除\n      if (prebundleOptions.enable === false) return\n\n      const taroReactPlugin: esbuild.Plugin = {\n        name: 'taroReactPlugin',\n        setup (build) {\n          build.onLoad({ filter: REG_TARO_H5 }, ({ path }) => {\n            const content = fs.readFileSync(path).toString()\n            return {\n              contents: require('./api-loader')(content),\n            }\n          })\n        }\n      }\n\n      prebundleOptions.esbuild ||= {}\n      const esbuildConfig = prebundleOptions.esbuild\n      esbuildConfig.plugins ||= []\n      esbuildConfig.plugins.push(taroReactPlugin)\n    } else if (compiler.type === 'vite') {\n      compiler.vitePlugins ||= []\n      compiler.vitePlugins.push(viteCommonPlugin(framework))\n      compiler.vitePlugins.push(VitePresetPlugin(framework))\n      if (process.env.TARO_PLATFORM === 'web') {\n        // H5\n        compiler.vitePlugins.push(h5iVitePlugin(ctx, framework))\n      } else if (process.env.TARO_PLATFORM === 'harmony' || process.env.TARO_ENV === 'harmony') {\n        // 鸿蒙\n        compiler.vitePlugins.push(harmonyVitePlugin(ctx, framework))\n      } else {\n        // 小程序\n        compiler.vitePlugins.push(miniVitePlugin(ctx, framework))\n      }\n    }\n  })\n}\n\nfunction setAlias (framework: Frameworks, chain) {\n  const alias = chain.resolve.alias\n  if (framework === 'preact') {\n    alias.set('react', 'preact/compat')\n    alias.set('react-dom/test-utils', 'preact/test-utils')\n    alias.set('react-dom', 'preact/compat')\n    alias.set('react/jsx-runtime', 'preact/jsx-runtime')\n  }\n}\n\nfunction VitePresetPlugin (framework: Frameworks): PluginOption {\n  return framework === 'preact'\n    ? require('@preact/preset-vite').preact({\n      babel: {\n        plugins: [\n          ['@babel/plugin-proposal-decorators', { legacy: true }],\n          ['@babel/plugin-proposal-class-properties', { loose: true }],\n        ],\n      },\n    })\n    : require('@vitejs/plugin-react').default({\n      babel: {\n        plugins: [\n          ['@babel/plugin-proposal-decorators', { legacy: true }],\n          ['@babel/plugin-proposal-class-properties', { loose: true }],\n        ],\n      },\n    })\n}\n\nfunction viteCommonPlugin (framework: Frameworks): PluginOption {\n  return {\n    name: 'taro-react:common',\n    config () {\n      const alias =\n        framework === 'preact'\n          ? [\n            { find: 'react', replacement: 'preact/compat' },\n            { find: 'react-dom/test-utils', replacement: 'preact/test-utils' },\n            { find: 'react-dom', replacement: 'preact/compat' },\n            { find: 'react/jsx-runtime', replacement: 'preact/jsx-runtime' },\n          ]\n          : []\n\n      return {\n        resolve: {\n          alias,\n        },\n      }\n    },\n  }\n}\n"],"names":["acorn","walk","injectLoaderMeta","mergeWith","REG_TARO_H5_RUNTIME_API","__awaiter","fs","aliasPlugin","defaultMainFields","resolveSync","setLoader","REG_TARO_H5","setAlias","isString"],"mappings":"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"}