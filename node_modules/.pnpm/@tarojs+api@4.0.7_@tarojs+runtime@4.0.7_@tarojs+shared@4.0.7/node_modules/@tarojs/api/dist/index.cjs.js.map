{"version":3,"file":"index.cjs.js","sources":["../src/env.ts","../src/interceptor/chain.ts","../src/interceptor/index.ts","../src/interceptor/interceptors.ts","../src/tools.ts","../src/index.ts"],"sourcesContent":["export const ENV_TYPE = {\n  WEAPP: 'WEAPP',\n  SWAN: 'SWAN',\n  ALIPAY: 'ALIPAY',\n  TT: 'TT',\n  QQ: 'QQ',\n  JD: 'JD',\n  WEB: 'WEB',\n  RN: 'RN',\n  HARMONY: 'HARMONY',\n  QUICKAPP: 'QUICKAPP',\n  HARMONYHYBRID: 'HARMONYHYBRID',\n}\n\nexport function getEnv () {\n  if (process.env.TARO_ENV === 'weapp') {\n    return ENV_TYPE.WEAPP\n  } else if (process.env.TARO_ENV === 'alipay') {\n    return ENV_TYPE.ALIPAY\n  } else if (process.env.TARO_ENV === 'swan') {\n    return ENV_TYPE.SWAN\n  } else if (process.env.TARO_ENV === 'tt') {\n    return ENV_TYPE.TT\n  } else if (process.env.TARO_ENV === 'jd') {\n    return ENV_TYPE.JD\n  } else if (process.env.TARO_ENV === 'qq') {\n    return ENV_TYPE.QQ\n  } else if (process.env.TARO_ENV === 'harmony-hybrid') {\n    return ENV_TYPE.HARMONYHYBRID\n  } else if (process.env.TARO_ENV === 'h5' || process.env.TARO_PLATFORM === 'web') {\n    return ENV_TYPE.WEB\n  } else if (process.env.TARO_ENV === 'rn') {\n    return ENV_TYPE.RN\n  } else if (process.env.TARO_ENV === 'harmony' || process.env.TARO_PLATFORM === 'harmony') {\n    return ENV_TYPE.HARMONY\n  } else if (process.env.TARO_ENV === 'quickapp') {\n    return ENV_TYPE.QUICKAPP\n  } else {\n    return process.env.TARO_ENV || 'Unknown'\n  }\n}\n","import { isFunction } from '@tarojs/shared'\n\nexport type TInterceptor = (c: Chain) => Promise<void>\n\nexport interface IRequestParams {\n  timeout?: number\n  method?: string\n  url?: string\n  data?: unknown\n}\n\nexport default class Chain {\n  index: number\n  requestParams: IRequestParams\n  interceptors: TInterceptor[]\n\n  constructor (requestParams?: IRequestParams, interceptors?: TInterceptor[], index?: number) {\n    this.index = index || 0\n    this.requestParams = requestParams || {}\n    this.interceptors = interceptors || []\n  }\n\n  proceed (requestParams: IRequestParams = {}) {\n    this.requestParams = requestParams\n    if (this.index >= this.interceptors.length) {\n      throw new Error('chain 参数错误, 请勿直接修改 request.chain')\n    }\n    const nextInterceptor = this._getNextInterceptor()\n    const nextChain = this._getNextChain()\n    const p = nextInterceptor(nextChain)\n    const res = p.catch(err => Promise.reject(err))\n    Object.keys(p).forEach(k => isFunction(p[k]) && (res[k] = p[k]))\n    return res\n  }\n\n  _getNextInterceptor () {\n    return this.interceptors[this.index]\n  }\n\n  _getNextChain () {\n    return new Chain(this.requestParams, this.interceptors, this.index + 1)\n  }\n}\n","import Chain from './chain'\n\nimport type { IRequestParams, TInterceptor } from './chain'\n\nexport default class Link {\n  taroInterceptor: TInterceptor\n  chain: Chain\n\n  constructor (interceptor: TInterceptor) {\n    this.taroInterceptor = interceptor\n    this.chain = new Chain()\n  }\n\n  request (requestParams: IRequestParams) {\n    const chain = this.chain\n    const taroInterceptor = this.taroInterceptor\n\n    chain.interceptors = chain.interceptors\n      .filter(interceptor => interceptor !== taroInterceptor)\n      .concat(taroInterceptor)\n\n    return chain.proceed({ ...requestParams })\n  }\n\n  addInterceptor (interceptor: TInterceptor) {\n    this.chain.interceptors.push(interceptor)\n  }\n\n  cleanInterceptors () {\n    this.chain = new Chain()\n  }\n}\n\nexport function interceptorify (promiseifyApi) {\n  return new Link(function (chain) {\n    return promiseifyApi(chain.requestParams)\n  })\n}\n","import { isFunction, isUndefined } from '@tarojs/shared'\n\nimport type Chain from './chain'\n\nexport function timeoutInterceptor (chain: Chain) {\n  const requestParams = chain.requestParams\n  let p: Promise<void>\n  const res = new Promise<void>((resolve, reject) => {\n    const timeout: ReturnType<typeof setTimeout> = setTimeout(() => {\n      clearTimeout(timeout)\n      reject(new Error('网络链接超时,请稍后再试！'))\n    }, (requestParams && requestParams.timeout) || 60000)\n\n    p = chain.proceed(requestParams)\n    p\n      .then(res => {\n        if (!timeout) return\n        clearTimeout(timeout)\n        resolve(res)\n      })\n      .catch(err => {\n        timeout && clearTimeout(timeout)\n        reject(err)\n      })\n  })\n  // @ts-ignore\n  if (!isUndefined(p) && isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n\nexport function logInterceptor (chain: Chain) {\n  const requestParams = chain.requestParams\n  const { method, data, url } = requestParams\n\n  // eslint-disable-next-line no-console\n  console.log(`http ${method || 'GET'} --> ${url} data: `, data)\n\n  const p = chain.proceed(requestParams)\n  const res = p\n    .then(res => {\n      // eslint-disable-next-line no-console\n      console.log(`http <-- ${url} result:`, res)\n      return res\n    })\n  // @ts-ignore\n  if (isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n","import { isFunction, isObject } from '@tarojs/shared'\n\nexport function Behavior (options) {\n  return options\n}\n\nexport function getPreload (current) {\n  return function (key: any, val: unknown) {\n    current.preloadData = isObject(key)\n      ? key\n      : {\n        [key]: val\n      }\n  }\n}\n\nconst defaultDesignWidth = 750\nconst defaultDesignRatio = {\n  640: 2.34 / 2,\n  750: 1,\n  828: 1.81 / 2\n}\nconst defaultBaseFontSize = 20\nconst defaultUnitPrecision = 5\nconst defaultTargetUnit = 'rpx'\n\nexport function getInitPxTransform (taro) {\n  return function (config) {\n    const {\n      designWidth = defaultDesignWidth,\n      deviceRatio = defaultDesignRatio,\n      baseFontSize = defaultBaseFontSize,\n      targetUnit = defaultTargetUnit,\n      unitPrecision = defaultUnitPrecision,\n    } = config\n    taro.config = taro.config || {}\n    taro.config.designWidth = designWidth\n    taro.config.deviceRatio = deviceRatio\n    taro.config.baseFontSize = baseFontSize\n    taro.config.targetUnit = targetUnit\n    taro.config.unitPrecision = unitPrecision\n  }\n}\n\nexport function getPxTransform (taro) {\n  return function (size) {\n    const config = taro.config || {}\n    const baseFontSize = config.baseFontSize\n    const deviceRatio = config.deviceRatio || defaultDesignRatio\n    const designWidth = ((input = 0) => isFunction(config.designWidth)\n      ? config.designWidth(input)\n      : config.designWidth || defaultDesignWidth)(size)\n    if (!(designWidth in deviceRatio)) {\n      throw new Error(`deviceRatio 配置中不存在 ${designWidth} 的设置！`)\n    }\n    const targetUnit = config.targetUnit || defaultTargetUnit\n    const unitPrecision = config.unitPrecision || defaultUnitPrecision\n    const formatSize = ~~size\n    let rootValue = 1 / deviceRatio[designWidth]\n    switch (targetUnit) {\n      case 'rem':\n        rootValue *= baseFontSize * 2\n        break\n      case 'px':\n        rootValue *= 2\n        break\n    }\n    let val = formatSize / rootValue\n    if (unitPrecision >= 0 && unitPrecision <= 100) {\n      val = Number(val.toFixed(unitPrecision))\n    }\n    return val + targetUnit\n  }\n}\n","/* eslint-disable camelcase */\nimport {\n  Current,\n  eventCenter,\n  Events,\n  getCurrentInstance,\n  nextTick,\n  options\n} from '@tarojs/runtime'\n\nimport { ENV_TYPE, getEnv } from './env'\nimport Link, { interceptorify } from './interceptor'\nimport * as interceptors from './interceptor/interceptors'\nimport {\n  Behavior,\n  getInitPxTransform,\n  getPreload,\n  getPxTransform,\n} from './tools'\n\nconst Taro: Record<string, unknown> = {\n  Behavior,\n  getEnv,\n  ENV_TYPE,\n  Link,\n  interceptors,\n  Current,\n  getCurrentInstance,\n  options,\n  nextTick,\n  eventCenter,\n  Events,\n  getInitPxTransform,\n  interceptorify\n}\n\nTaro.initPxTransform = getInitPxTransform(Taro)\nTaro.preload = getPreload(Current)\nTaro.pxTransform = getPxTransform(Taro)\n\nexport default Taro\n"],"names":["isFunction","isUndefined","isObject","Current","getCurrentInstance","options","nextTick","eventCenter","Events"],"mappings":"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"}